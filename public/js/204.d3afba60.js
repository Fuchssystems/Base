(self["webpackChunkbase"]=self["webpackChunkbase"]||[]).push([[204],{1204:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>V});var l=a(3673),i=a(2323);const s=(0,l.HX)("data-v-2b165619"),n=s(((e,t,a,n,o,r)=>{const u=(0,l.up)("q-icon"),c=(0,l.up)("q-btn"),g=(0,l.up)("q-toolbar-title"),m=(0,l.up)("user-language-menu"),d=(0,l.up)("q-item-section"),h=(0,l.up)("q-item"),p=(0,l.up)("q-list"),_=(0,l.up)("q-menu"),f=(0,l.up)("q-toolbar"),b=(0,l.up)("q-header"),I=(0,l.up)("q-item-label"),k=(0,l.up)("q-expansion-item"),v=(0,l.up)("q-drawer"),w=(0,l.up)("router-view"),$=(0,l.up)("q-page-container"),U=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.j4)(U,{view:"lHh Lpr lFf"},{default:s((()=>[(0,l.Wm)(b,{elevated:""},{default:s((()=>[(0,l.Wm)(f,null,{default:s((()=>[(0,l.Wm)(c,{flat:"",dense:"",round:"",onClick:t[1]||(t[1]=e=>o.leftDrawerOpen=!o.leftDrawerOpen),"aria-label":"Menu"},{default:s((()=>[(0,l.Wm)(u,{name:"menu"})])),_:1}),(0,l.Wm)(g,{class:"lt-md"},{default:s((()=>[(0,l.Uk)((0,i.zw)(),1)])),_:1}),(0,l.Wm)(g,{class:"gt-sm"},{default:s((()=>[(0,l.Uk)((0,i.zw)(e.$t("app_applicationName")),1)])),_:1}),(0,l.Wm)(m),e.getIsLoggedIn?(0,l.ry)("",!0):((0,l.wg)(),(0,l.j4)(c,{key:0,to:"/login",flat:"",label:e.$t("app_log_label_Login")},null,8,["label"])),e.getIsLoggedIn?((0,l.wg)(),(0,l.j4)(c,{key:2,onClick:r.logout,flat:"",label:e.$t("app_log_label_Logout")},null,8,["onClick","label"])):((0,l.wg)(),(0,l.j4)(c,{key:1,to:"/register",flat:"",label:e.$t("app_log_label_Register")},null,8,["label"])),e.getUserToken?((0,l.wg)(),(0,l.j4)(c,{key:3,class:"toolbar-username toolbar-button-text",flat:"",icon:"account_circle",label:e.getUserName},{default:s((()=>[e.getIsLoggedIn?((0,l.wg)(),(0,l.j4)(_,{key:0,"auto-close":""},{default:s((()=>[(0,l.Wm)(p,{style:{"min-width":"100px"}},{default:s((()=>[(0,l.Wm)(h,{clickable:"",to:"/credentials"},{default:s((()=>[(0,l.Wm)(d,null,{default:s((()=>[(0,l.Uk)((0,i.zw)(e.$t("menu_user_menu_account_item_credentials")),1)])),_:1})])),_:1})])),_:1})])),_:1})):(0,l.ry)("",!0)])),_:1},8,["label"])):(0,l.ry)("",!0)])),_:1})])),_:1}),(0,l.Wm)(v,{modelValue:o.leftDrawerOpen,"onUpdate:modelValue":t[2]||(t[2]=e=>o.leftDrawerOpen=e),bordered:"",class:"bg-primary"},{default:s((()=>[(0,l.Wm)(p,{dark:""},{default:s((()=>[(0,l.Wm)(I,{header:""},{default:s((()=>[(0,l.Uk)((0,i.zw)(e.$t("menu_navigation_title")),1)])),_:1}),((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(r.navs,(e=>((0,l.wg)(),(0,l.j4)("div",{key:e.label},[e.to&&!e.hide?((0,l.wg)(),(0,l.j4)(h,{key:0,to:e.to,class:"text-grey-4",exact:"",clickable:""},{default:s((()=>[(0,l.Wm)(d,{avatar:""},{default:s((()=>[(0,l.Wm)(u,{name:e.icon},null,8,["name"])])),_:2},1024),(0,l.Wm)(d,null,{default:s((()=>[(0,l.Wm)(I,null,{default:s((()=>[(0,l.Uk)((0,i.zw)(e.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])):(0,l.ry)("",!0),e.to||e.hide?(0,l.ry)("",!0):((0,l.wg)(),(0,l.j4)(k,{key:1,"expand-separator":"",icon:e.icon,label:e.label},{default:s((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.menuItems,(e=>((0,l.wg)(),(0,l.j4)("div",{key:e.label},[(0,l.Wm)(h,{to:e.to,class:"text-grey-4",exact:"",clickable:""},{default:s((()=>[(0,l.Wm)(d,{avatar:""},{default:s((()=>[(0,l.Wm)(u,{name:e.icon},null,8,["name"])])),_:2},1024),(0,l.Wm)(d,null,{default:s((()=>[(0,l.Wm)(I,null,{default:s((()=>[(0,l.Uk)((0,i.zw)(e.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["to"])])))),128))])),_:2},1032,["icon","label"]))])))),128))])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)($,null,{default:s((()=>[(0,l.Wm)(w)])),_:1})])),_:1})}));var o=a(515),r=a.n(o),u=a(3437),c=a(4434),g=a(7874),m=a(7476),d=a(8603);const h={style:{"min-width":"110px"}};function p(e,t,a,i,s,n){const o=(0,l.up)("q-option-group"),r=(0,l.up)("q-menu"),u=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.j4)(u,{flat:"",icon:"language",style:{"max-width":"32px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{"auto-close":"",ref:"languageMenu"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",h,[(0,l.Wm)(o,{modelValue:n.languageGroup,"onUpdate:modelValue":t[1]||(t[1]=e=>n.languageGroup=e),options:s.languageOptions},null,8,["modelValue","options"])])])),_:1},512)])),_:1})}var _=a(6630);const f={data(){return{languageOptions:[{label:"Deutsch",value:"de-de"},{label:"Englisch",value:"en-us"},{label:"Español",value:"es-es"}]}},methods:r()(r()({},(0,g.nv)(["setLanguageLocale"])),(0,m.$R)([_.A0])),computed:r()(r()({},(0,g.Se)(["getUserId","getUserLanguageLocale","getUserToken"])),{},{languageGroup:{get(){return this.$store.getters.getUserLanguageLocale},set(e){this.setLanguageLocale(e),this.$root.$i18n.locale=e,this[_.A0]({userId:this.getUserId,language:this.getUserLanguageLocale,token:this.getUserToken})}}}),watch:{languageGroup(){this.$refs.languageMenu.hide()}}};var b=a(8240),I=a(6335),k=a(8758),v=a(7518),w=a.n(v);f.render=p;const $=f;w()(f,"components",{QBtn:b.Z,QMenu:I.Z,QOptionGroup:k.Z});var U=a(9051),y=a(7942),L=a(6401),W=a(2920);const C={name:"MyLayout",data(){return{leftDrawerOpen:this.$q.platform.is.desktop,incomingCallNotification:null,ringtone:new Audio("sounds/ringtone.mp3")}},methods:r()(r()({openURL:u.Z,logout(){this[_.Jy]({token:this.getUserToken,sessionId:this.getUserSessionId})},listen(){this.getUserActiveProfileId&&this.$echo.channel(`profile.${this.getUserActiveProfileId}`).listen("MessageToProfile",(e=>{if("isWriting"!==e.message.type&&(this[U.Lj](e.message),"newChatmessage"===e.message.type))if(e.message.senderProfile.id===this.getChatChatMessagesProfileIdSet)this[U.DK]({chatMessageId:e.message.chatmessage.id,token:this.getUserToken});else{let t=e.message.chatmessage.messageText;t.length>100&&(t+="…"),this.incomingCallNotification=c.Z.create({message:`${this.$t("chat_message_newMessageFrom")} ${e.message.senderProfile.name}`,caption:t,color:"teal",textColor:"white",icon:"email"})}if("isWriting"===e.message.type&&(this.chatSetProfileSetIsWriting({isWriting:!0}),this.resetIsWriting()),"updateCall"===e.message.type){this.vcSetCall({responseData:{call:e.message.call}});const{status:t}=e.message.call;switch(t){case y.mt:this[y.$M]({id:e.message.call.id,status:this.getVCcallerStatus===y.lm?y.iE:y.JX,token:this.getUserToken}),this.getVCcallerStatus===y.lm&&(this.ringtone.play(),this.incomingCallNotification=c.Z.create({message:(0,L.m)("vc_notification_incomingCall_from",{name:e.message.call.profile_name_receiver}),timeout:1e4,color:"info",textColor:"white",icon:"video_call",position:"center",multiline:!0,group:!1,onDismiss:()=>{this.ringtone.pause(),this.ringtone.currentTime=0,this.incomingCallNotification=null},actions:[{icon:"call_end",label:this.$t("vc_button_call_decline"),color:"red",handler:()=>{this[y.$M]({id:e.message.call.id,status:y.o6,token:this.getUserToken})}},{icon:"call",label:this.$t("vc_button_call_accept"),color:"green",handler:()=>{this.ringtone.pause(),this.ringtone.currentTime=0,this[y.$M]({id:e.message.call.id,status:y.in,token:this.getUserToken,sessionIdReceiver:this.getUserSessionId}),this.vcSetModeUseReceivedProfile({modeUseReceivedProfile:!0}),this[y.hw]({id:e.message.call.profile_id_caller,token:this.getUserToken}),"/profileDetail/videochat"!==this.$route.path&&this.$router.push("/profileDetail/videochat")}}]}));break;case y.JX:this.vcSetCallerStatus(y.lm);break;case y.HC:this.incomingCallNotification&&(console.log("Handling VC_CALL_END_CALL"),this.incomingCallNotification()),this.vcInitComponent();break}}}))}},(0,g.nv)(["chatSetProfileSetIsWriting","vcInitComponent","vcSetCall","vcSetCallerStatus","vcSetModeUseReceivedProfile"])),(0,m.$R)([_.Jy,U.Lj,U.DK,y.$M,y.hw])),computed:r()(r()({},(0,g.Se)(["getChatChatMessagesProfileIdSet","getIsLoggedIn","getUserLanguageLocale","getUserToken","getUserName","getUserActiveProfileId","getUserSessionId","getVCcallerStatus"])),{},{navs(){return[{label:this.$t("menu_navigation_home"),icon:"mdi-home",to:"/"},{label:this.$t("menu_chat_title"),hide:!this.getIsLoggedIn||!W.Z.featureChat,icon:"chat",to:"/chat"},{label:this.$t("menu_user_menu_account_title_acountSettings"),hide:!this.getIsLoggedIn,icon:"account_circle",menuItems:[{label:this.$t("menu_user_menu_account_item_credentials"),to:"/credentials"},{label:this.$t("menu_user_menu_account_item_deleteAccount"),to:"/deleteAccount"}]},{label:this.$t("menu_profile_title"),hide:!this.getIsLoggedIn,icon:"mdi-card-account-details",menuItems:[{label:this.$t("menu_profile_item_personalData"),to:"/profilePersonalData"},{label:this.$t("menu_profile_item_profilePicture"),to:"/profilePicture"},{label:this.$t("menu_profile_item_images"),to:"/profileImages"}]},{label:this.$t("menu_payments_title"),hide:!this.getIsLoggedIn,icon:"euro_symbol",menuItems:[{label:this.$t("menu_payments_makeTransfer"),to:"/payments"},{label:this.$t("menu_payments_transactions"),to:"/transactions"}]},{label:this.$t("menu_contact_title"),icon:"contact_support",to:"/contact"},{label:"Protected",icon:"security",to:"/protected"}]}}),watch:{getUserActiveProfileId(){this.listen()}},mounted(){this.$root.$i18n.locale=this.getUserLanguageLocale,this.listen(),this.resetIsWriting=(0,d.debounce)((()=>{this.chatSetProfileSetIsWriting({isWriting:!1})}),5e3,{leading:!1,trailing:!0})},components:{"user-language-menu":$}};var S=a(9214),Z=a(3812),P=a(9570),q=a(4554),T=a(3747),M=a(7011),Q=a(3414),D=a(2035),j=a(2901),x=a(2350),A=a(4615),N=a(2652);C.render=n,C.__scopeId="data-v-2b165619";const V=C;w()(C,"components",{QLayout:S.Z,QHeader:Z.Z,QToolbar:P.Z,QBtn:b.Z,QIcon:q.Z,QToolbarTitle:T.Z,QMenu:I.Z,QList:M.Z,QItem:Q.Z,QItemSection:D.Z,QDrawer:j.Z,QItemLabel:x.Z,QExpansionItem:A.Z,QPageContainer:N.Z})}}]);