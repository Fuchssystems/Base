(self["webpackChunkbase"]=self["webpackChunkbase"]||[]).push([[633],{6022:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var l=a(3673),r=a(2323);const o=(0,l.HX)("data-v-2afc755b");(0,l.dD)("data-v-2afc755b");const i={class:"div-profiles"},s={key:2,style:{"margin-top":"150px","margin-left":"-26px"},class:"text-h6 q-mx-md text-blue-grey-8"},n={style:{width:"100%"}},h={class:"row justify-start items-top bg-teal",style:{width:"100%","max-height":"170px"}},c={class:"col-3 q-ma-sm q-pa-sm",style:{width:"170px"}},g={key:2,class:"text-orange text-weight-bold",style:{"margin-top":"17px"}},m={key:0,class:"col-3",style:{"margin-top":"16px",width:"48px"}},d={key:1,class:"col-3 q-pa-sm justify-end",style:{"margin-top":"20px","margin-left":"10px","margin-bottom":"-10px",width:"100px"}},u={key:2,class:"text-orange text-weight-bold",style:{"margin-top":"17px"}};(0,l.Cn)();const p=o(((e,t,a,p,S,C)=>{const f=(0,l.up)("q-avatar"),_=(0,l.up)("q-item-section"),b=(0,l.up)("q-item-label"),P=(0,l.up)("q-badge"),x=(0,l.up)("q-icon"),y=(0,l.up)("q-item"),v=(0,l.up)("q-separator"),A=(0,l.up)("q-list"),F=(0,l.up)("q-skeleton"),w=(0,l.up)("error-row-card"),U=(0,l.up)("q-tab"),M=(0,l.up)("q-tabs"),I=(0,l.up)("q-input"),k=(0,l.up)("q-toggle"),T=(0,l.up)("q-slider"),L=(0,l.up)("q-page-sticky"),R=(0,l.up)("q-page"),W=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.j4)(R,{padding:""},{default:o((()=>[(0,l.Wm)("div",i,[e.getChatIsFetching?(0,l.ry)("",!0):((0,l.wg)(),(0,l.j4)(A,{key:0,style:C.profileListStyles()},{default:o((()=>[((0,l.wg)(!0),(0,l.j4)(l.HY,null,(0,l.Ko)(e.getChatProfiles,((t,a)=>((0,l.wg)(),(0,l.j4)("div",{key:a},[(0,l.wy)((0,l.Wm)(y,{clickable:"",onClick:e=>C.onProfileClicked(a)},{default:o((()=>[(0,l.Wm)(_,{avatar:""},{default:o((()=>[(0,l.Wm)(f,{rounded:""},{default:o((()=>[(0,l.Wm)("img",{src:t.profile_image.filecontent},null,8,["src"])])),_:2},1024)])),_:2},1024),(0,l.Wm)(_,null,{default:o((()=>[(0,l.Wm)(b,null,{default:o((()=>[(0,l.Uk)((0,r.zw)(t.name),1)])),_:2},1024),(0,l.Wm)(b,{caption:""},{default:o((()=>[(0,l.Uk)((0,r.zw)(`${t.city} ${t.distance} km`),1)])),_:2},1024)])),_:2},1024),t.online?((0,l.wg)(),(0,l.j4)(_,{key:0,side:"",top:""},{default:o((()=>[(0,l.Wm)(P,{color:"red",class:"q-mt-sm"},{default:o((()=>[(0,l.Uk)((0,r.zw)(e.$t("profile_onlineStatus_online")),1)])),_:1})])),_:1})):(0,l.ry)("",!0),(0,l.Wm)(_,{side:"",top:"",style:{width:"44px"}},{default:o((()=>[t.is_contact?((0,l.wg)(),(0,l.j4)(x,{key:0,name:S.attributeOptions.is_contact.icon,color:S.attributeOptions.is_contact.color,class:"q-mr-sm"},null,8,["name","color"])):(0,l.ry)("",!0),t.relation_unread_messages_count?((0,l.wg)(),(0,l.j4)(P,{key:1,color:"red",class:"q-mt-sm"},{default:o((()=>[(0,l.Wm)(x,{name:"email",color:"white",class:"q-mr-xs"}),(0,l.Uk)(" "+(0,r.zw)(t.relation_unread_messages_count),1)])),_:2},1024)):(0,l.ry)("",!0)])),_:2},1024),(0,l.Wm)(_,{side:"",top:""},{default:o((()=>[(0,l.Wm)(x,{name:S.attributeOptions[t.gender_male_female_diverse_null].icon,color:S.attributeOptions[t.gender_male_female_diverse_null].color},null,8,["name","color"]),(0,l.Wm)(b,{caption:"",class:"q-mt-xs"},{default:o((()=>[(0,l.Uk)((0,r.zw)(`(${t.ageYears})`),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),[[W]]),(0,l.Wm)(v,{inset:""})])))),128))])),_:1},8,["style"])),e.getChatIsFetching?((0,l.wg)(),(0,l.j4)(F,{key:1,height:"480px",style:C.profileListStyles()},null,8,["style"])):(0,l.ry)("",!0),e.getChatSearchNothingFound?((0,l.wg)(),(0,l.j4)("div",s,(0,r.zw)(S.m("app_search_message_no_recordnames_found",{recordname:S.searchModeOptions.recordName[e.getUserPreferenceChatSearchMode]})),1)):(0,l.ry)("",!0),(0,l.Wm)(w,{errorList:e.getChatErrorList},null,8,["errorList"]),(0,l.Wm)(L,{expand:"",position:"top"},{default:o((()=>[(0,l.Wm)("div",n,[(0,l.Wm)(M,{"model-value":e.getUserPreferenceChatSearchMode,"no-caps":"","inline-label":"",align:"left",class:"bg-cyan-8 text-white shadow-2",breakpoint:0,"onUpdate:modelValue":C.onTabValueChange},{default:o((()=>[(0,l.Wm)(U,{name:"profiles",label:e.$t("chat_tab_profiles"),icon:S.attributeOptions.profiles.icon},null,8,["label","icon"]),(0,l.Wm)(U,{name:"contacts",label:e.$t("chat_tab_contacts"),icon:S.attributeOptions.is_contact.icon},null,8,["label","icon"]),(0,l.Wm)(U,{name:"messages",label:e.$t("chat_tab_messages"),icon:S.attributeOptions.messages.icon},{default:o((()=>[e.getActiveProfileUnreadMessagesCount?((0,l.wg)(),(0,l.j4)(P,{key:0,style:{"margin-top":"1px"},color:"red",floating:""},{default:o((()=>[(0,l.Uk)((0,r.zw)(e.getActiveProfileUnreadMessagesCount),1)])),_:1})):(0,l.ry)("",!0)])),_:1},8,["label","icon"])])),_:1},8,["model-value","onUpdate:modelValue"])]),(0,l.Wm)("div",h,[(0,l.Wm)("div",c,[(0,l.Wm)(I,{borderless:"","model-value":e.getChatSearchFilter.name,style:{width:"170px"},"input-style":{color:"white"},placeholder:e.$t("app_placeholder_typeToStartSearching"),hint:e.getChatSearchFilter.name.length&&e.getChatSearchFilter.name.length<S.CHAT_SEARCH_NAME_LENGTH_MIN?S.m("chat_field_searchName_hint",{min:S.CHAT_SEARCH_NAME_LENGTH_MIN}):"","onUpdate:modelValue":C.onNameSearchInput},{append:o((()=>[""!==e.getChatSearchFilter.name?((0,l.wg)(),(0,l.j4)(x,{key:0,name:"close",color:"blue-grey-8",onClick:C.onNameSearchClear,class:"cursor-pointer"},null,8,["onClick"])):(0,l.ry)("",!0),(0,l.Wm)(x,{name:"search",color:"blue-grey-2"})])),_:1},8,["model-value","placeholder","hint","onUpdate:modelValue"]),e.getUserPreferenceChatSearchModeIsProfiles?((0,l.wg)(),(0,l.j4)(k,{key:0,class:"gender-toggle",style:{"margin-left":"-14px","margin-top":"0px"},"model-value":e.getChatSearchFilter.all,"onUpdate:modelValue":C.onFilterAllToggle,label:e.$t("app_search_label_Show_all"),color:"blue-grey-8","checked-icon":"check","unchecked-icon":"clear"},null,8,["model-value","onUpdate:modelValue","label"])):(0,l.ry)("",!0),e.getChatPaginationLastPage>1&&e.getUserPreferenceChatSearchModeIsProfiles?((0,l.wg)(),(0,l.j4)(T,{key:1,class:"xs",style:{"margin-left":"10px","margin-top":"34px","margin-bottom":"-12px"},"model-value":e.getChatPaginatePageNumberSelected,"onUpdate:modelValue":C.onProfilePageInput,onChange:C.onProfilePageChange,min:1,max:e.getChatPaginationLastPage,step:1,label:"","label-value":e.getChatPageSliderLabel,"label-always":"",color:"orange"},null,8,["model-value","onUpdate:modelValue","onChange","max","label-value"])):(0,l.ry)("",!0),!e.getChatIsFetching&&e.getChatPaginationLastPage<=1&&!S.nameSearchIsBouncing&&e.getChatProfiles.length&&e.getUserPreferenceChatSearchModeIsProfiles&&!e.$q.screen.gt.xs?((0,l.wg)(),(0,l.j4)("div",g,(0,r.zw)(S.m("app_search_message_number_found",{count:e.getChatProfiles.length})),1)):(0,l.ry)("",!0)]),e.getUserPreferenceChatSearchModeIsProfiles?((0,l.wg)(),(0,l.j4)("div",m,[(0,l.Wm)(k,{class:"gender-toggle","model-value":e.getChatSearchFilter.genders.male,"onUpdate:modelValue":t[1]||(t[1]=e=>C.onGenderToggle("male")),icon:S.attributeOptions.male.icon,color:S.attributeOptions.male.color},null,8,["model-value","icon","color"]),(0,l.Wm)(k,{class:"gender-toggle","model-value":e.getChatSearchFilter.genders.female,"onUpdate:modelValue":t[2]||(t[2]=e=>C.onGenderToggle("female")),icon:S.attributeOptions.female.icon,color:S.attributeOptions.female.color},null,8,["model-value","icon","color"]),(0,l.Wm)(k,{class:"gender-toggle","model-value":e.getChatSearchFilter.genders.diverse,"onUpdate:modelValue":t[3]||(t[3]=e=>C.onGenderToggle("diverse")),icon:S.attributeOptions.diverse.icon,color:S.attributeOptions.diverse.color},null,8,["model-value","icon","color"])])):(0,l.ry)("",!0),e.getUserPreferenceChatSearchModeIsProfiles?((0,l.wg)(),(0,l.j4)("div",d,[(0,l.Wm)(T,{"model-value":e.getChatSearchFilter.minAge,"onUpdate:modelValue":C.chatSetSearchFilterMinAge,onChange:C.onAgeChange,min:S.CHAT_SEARCH_AGE_MIN,max:S.CHAT_SEARCH_AGE_MAX,step:1,label:"","label-value":e.getChatSearchAgeMinLabel,"label-always":"",color:"blue-grey-8",style:{"margin-bottom":"12px"}},null,8,["model-value","onUpdate:modelValue","onChange","min","max","label-value"]),(0,l.Wm)(T,{"model-value":e.getChatSearchFilter.maxAge,"onUpdate:modelValue":C.chatSetSearchFilterMaxAge,onChange:C.onAgeChange,min:S.CHAT_SEARCH_AGE_MIN,max:S.CHAT_SEARCH_AGE_MAX,step:1,label:"","label-value":e.getChatSearchAgeMaxLabel,"label-always":"",color:"blue-grey-8"},null,8,["model-value","onUpdate:modelValue","onChange","min","max","label-value"]),(0,l.Wm)(T,{class:"xs","model-value":e.getChatSearchFilter.distance,"onUpdate:modelValue":e.chatSetSearchFilterDistance,onChange:C.onDistanceChange,min:0,max:S.CHAT_SEARCH_DISTANCE_MAX_KM,step:10,label:"","label-value":e.getChatSearchDistanceLabel,"label-always":"",color:"blue-grey-8",style:{"margin-top":"12px"}},null,8,["model-value","onUpdate:modelValue","onChange","max","label-value"])])):(0,l.ry)("",!0),(0,l.Wm)("div",{class:"col-3 q-pa-sm",style:e.getUserPreferenceChatSearchModeIsProfiles?"margin-top:20px; margin-left: 10px; margin-bottom:-10px; width:100px":"margin-top:30px; margin-left: 20px; margin-bottom:-10px; width:100px"},[e.getUserPreferenceChatSearchModeIsProfiles&&e.$q.screen.gt.xs?((0,l.wg)(),(0,l.j4)(T,{key:0,"model-value":e.getChatSearchFilter.distance,"onUpdate:modelValue":e.chatSetSearchFilterDistance,onChange:C.onDistanceChange,min:0,max:S.CHAT_SEARCH_DISTANCE_MAX_KM,step:10,label:"","label-value":e.getChatSearchDistanceLabel,"label-always":"",color:"blue-grey-8",style:{"margin-bottom":"12px"}},null,8,["model-value","onUpdate:modelValue","onChange","max","label-value"])):(0,l.ry)("",!0),e.getChatPaginationLastPage>1&&(!e.getUserPreferenceChatSearchModeIsProfiles||e.$q.screen.gt.xs)?((0,l.wg)(),(0,l.j4)(T,{key:1,"model-value":e.getChatPaginatePageNumberSelected,"onUpdate:modelValue":C.onProfilePageInput,onChange:C.onProfilePageChange,min:1,max:e.getChatPaginationLastPage,step:1,label:"","label-value":e.getChatPageSliderLabel,"label-always":"",color:"orange"},null,8,["model-value","onUpdate:modelValue","onChange","max","label-value"])):(0,l.ry)("",!0),!e.getChatIsFetching&&e.getChatPaginationLastPage<=1&&!S.nameSearchIsBouncing&&e.getChatProfiles.length&&(!e.getUserPreferenceChatSearchModeIsProfiles||e.$q.screen.gt.xs)?((0,l.wg)(),(0,l.j4)("div",u,(0,r.zw)(S.m("app_search_message_number_found",{count:e.getChatProfiles.length})),1)):(0,l.ry)("",!0)],4)])])),_:1})])])),_:1})}));var S=a(515),C=a.n(S),f=a(8603),_=a(7874),b=a(7476),P=a(816),x=a(9051),y=a(6630),v=a(7636),A=a(6401),F=a(2920);const w={data(){return{CHAT_SEARCH_AGE_MIN:x.JZ,CHAT_SEARCH_AGE_MAX:x.KQ,CHAT_SEARCH_DISTANCE_MAX_KM:x.TS,CHAT_SEARCH_NAME_LENGTH_MIN:x.bx,nameSearchIsBouncing:!1,m:A.m,attributeOptions:v.V,profileListStyles_modeProfiles_gt_xs:{marginTop:"134px",marginRight:"-24px",marginBottom:"-10px",marginLeft:"-36px",width:"100%",maxWidth:"300px"},profileListStyles_modeProfiles_xs:{marginTop:"200px",marginRight:"-24px",marginBottom:"-10px",marginLeft:"-36px",width:"100%",maxWidth:"300px"},profileListStyles_modeNotProfiles:{marginTop:"100px",marginRight:"-24px",marginBottom:"-10px",marginLeft:"-36px",width:"100%",maxWidth:"300px"},searchModeOptions:{recordName:{profiles:"profile",contacts:"contact",messages:"profileWithnewMessage"}}}},name:"Chat",components:{"error-row-card":P.Z},methods:C()(C()({postSearch(){console.log(`postsearch: this.getChatSearchFilter.mode\n        :${this.getChatSearchFilter.mode}`),(!this.getUserPreferenceChatSearchModeIsProfiles||this.getChatSearchFilter.all||this.getChatSearchFilter.name||!this.getChatSearchFilter.genders.male||!this.getChatSearchFilter.genders.female||!this.getChatSearchFilter.genders.diverse||this.getChatSearchFilter.minAge>x.JZ||this.getChatSearchFilter.maxAge<x.KQ||this.getChatSearchFilter.distance<x.TS)&&this[x.S4]({searchFilter:(0,f.cloneDeep)(this.getChatSearchFilter),token:this.getUserToken,sessionId:this.getUserSessionId})},resetSearchResult(){console.log("resetSearchResult"),this.chatClearSearchByFilterResult(),this.getChatErrorList.length&&this.chatResetErrorlist()},onFilterAllToggle(){this.chatSetSearchFilterAll(!this.getChatSearchFilter.all),this.getChatSearchFilter.all&&(this.resetSearchResult(),this.postSearch())},onAgeChange(){this.resetSearchResult(),this.postSearch()},onNameSearchInput(e){this.nameSearchIsBouncing=!0,this.chatSetSearchFilterName(e),this.resetSearchResult(),clearTimeout(this.debouncedSearch),this.debouncedSearch=setTimeout((()=>{this.nameSearchIsBouncing=!1,(this.getChatSearchFilter.name.length>=x.bx||!this.getUserPreferenceChatSearchModeIsProfiles&&!this.getChatSearchFilter.name.length)&&this.postSearch()}),600)},onNameSearchClear(){this.chatSetSearchFilterName(""),this.resetSearchResult(),this.postSearch()},onGenderToggle(e){this.chatSetSearchFilterToggleGender(e),this.resetSearchResult(),this.postSearch()},chatSetSearchFilterMinAge(e){const t={minAge:e};e>this.getChatSearchFilter.maxAge&&(t.maxAge=e),this.chatSetSearchFilterAges(t)},chatSetSearchFilterMaxAge(e){const t={maxAge:e};e<this.getChatSearchFilter.minAge&&(t.minAge=e),this.chatSetSearchFilterAges(t)},onDistanceChange(e){this.chatSetSearchFilterDistance(e),this.resetSearchResult(),this.postSearch()},onProfileClicked(e){F.Z.featureProfileDetailView&&(this.chatSetSelectedProfileId(this.getChatProfiles[e].id),this.$router.push("/profileDetail"))},onProfilePageInput(e){this.chatSetProfilesPageNumberSelected(e)},onProfilePageChange(e){this.chatSetSearchFilterQueryPage(e),this.postSearch()},onTabValueChange(e){this.userPrefenceSet({key:"chatSearchModeTab",value:e}),this[y.wT]({fields:{user:{preferences:this.getUserPreferenceObject}},mutateStateAfterResponse:!1,token:this.getUserToken}),this.chatSetSearchFilterName(""),this.chatSetSearchFilterMode(e),this.resetSearchResult(),this.postSearch()},profileListStyles(){return this.getUserPreferenceChatSearchModeIsProfiles?this.$q.screen.gt.xs?this.profileListStyles_modeProfiles_gt_xs:this.profileListStyles_modeProfiles_xs:this.profileListStyles_modeNotProfiles}},(0,_.nv)(["chatSetSelectedProfileId","chatSetSearchFilterAll","chatSetSearchFilterName","chatSetSearchFilterMode","chatSetSearchFilterToggleGender","chatSetSearchFilterDistance","chatSetSearchFilterAges","chatClearSearchByFilterResult","chatResetErrorlist","chatSetProfilesPageNumberSelected","chatSetSearchFilterQueryPage","chatClearProfileImagesFetchResult","chatProfileImagesResetErrorlist","userPrefenceSet","vcSetModeUseReceivedProfile"])),(0,b.$R)([x.S4,x.jK,x.hW,y.wT])),computed:C()({},(0,_.Se)(["getActiveProfileUnreadMessagesCount","getChatProfiles","getChatSearchFilter","getChatSearchDistanceLabel","getChatSearchAgeMinLabel","getChatSearchAgeMaxLabel","getChatIsFetching","getChatSearchNothingFound","getChatErrorList","getUserToken","getUserSessionId","getChatPaginationMetaProfiles","getChatPaginatePageNumberSelected","getChatPaginationLastPage","getChatPageSliderLabel","getChatProfileImagesIsFetching","getChatProfileImagesErrorList","getUserPreferenceChatSearchMode","getUserPreferenceChatSearchModeIsProfiles","getUserPreferenceObject","getVCmodeUseReceivedProfile"])),mounted(){this.chatSetSelectedProfileId(null),this.getVCmodeUseReceivedProfile?this.vcSetModeUseReceivedProfile({modeUseReceivedProfile:!1}):(this.chatSetSearchFilterMode(this.getUserPreferenceChatSearchMode),this.resetSearchResult()),this.postSearch()},beforeUnmount(){this[x.jK]()}};var U=a(4379),M=a(7011),I=a(3414),k=a(2035),T=a(5096),L=a(2350),R=a(9721),W=a(4554),N=a(5869),E=a(4103),q=a(1007),H=a(7547),V=a(3269),j=a(4842),Q=a(8886),Z=a(2064),O=a(6115),D=a(6489),$=a(7518),G=a.n($);w.render=p,w.__scopeId="data-v-2afc755b";const B=w;G()(w,"components",{QPage:U.Z,QList:M.Z,QItem:I.Z,QItemSection:k.Z,QAvatar:T.Z,QItemLabel:L.Z,QBadge:R.Z,QIcon:W.Z,QSeparator:N.Z,QSkeleton:E.ZP,QPageSticky:q.Z,QTabs:H.Z,QTab:V.Z,QInput:j.Z,QToggle:Q.Z,QSlider:Z.Z,QField:O.Z}),G()(w,"directives",{Ripple:D.Z})}}]);