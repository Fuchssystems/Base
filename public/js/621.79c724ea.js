(self["webpackChunkbase"]=self["webpackChunkbase"]||[]).push([[621],{5023:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>A});t(71);var r=t(3673),o=t(8880),l=t(2323);const a={class:"row q-mb-md"},n={class:"row q-mb-md items-start"},s={key:0,class:"row q-mb-md"},c={key:0,class:"absolute-full flex flex-center"},m={key:1,class:"row q-mb-md"},d={key:0,class:"absolute-full flex flex-center"};function p(e,i,t,p,u,f){const g=(0,r.up)("q-icon"),h=(0,r.up)("q-banner"),I=(0,r.up)("q-btn"),_=(0,r.up)("q-spinner"),y=(0,r.up)("q-img"),F=(0,r.up)("confirm-yes-no"),b=(0,r.up)("error-row-card"),P=(0,r.up)("q-card"),w=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(w,{padding:""},{default:(0,r.w5)((()=>[(0,r.Wm)(P,{class:"input-card"},{default:(0,r.w5)((()=>[(0,r.Wm)("form",{onSubmit:i[5]||(i[5]=(0,o.iM)(((...i)=>e.submitForm&&e.submitForm(...i)),["prevent"]))},[(0,r.Wm)("input",{id:"inputImageFileSelection",type:"file",accept:"image/*",ref:"inputImageFileSelection",style:{display:"none"},onChange:i[1]||(i[1]=(...e)=>f.upload&&f.upload(...e))},null,544),(0,r.Wm)("div",a,[(0,r.Wm)(h,{class:"bg-grey-3 col"},{avatar:(0,r.w5)((()=>[(0,r.Wm)(g,{name:"portrait",color:"primary"})])),default:(0,r.w5)((()=>[(0,r.Uk)(" "+(0,l.zw)(e.$t("profile_profilePicture_title")),1)])),_:1})]),(0,r.Wm)("div",n,[(0,r.Wm)(I,{color:"primary",icon:"cloud_upload",label:e.getActiveProfileImageContent?e.$t("profile_profilePicture_button_changeFile_label"):e.$t("profile_profilePicture_button_selectFile_label"),disable:e.getFileProcessingStatusWithTemporaryFileId(u.temporaryFileId),onClick:i[2]||(i[2]=i=>{e.$refs.inputImageFileSelection.click()})},null,8,["label","disable"]),(0,r.Wm)(I,{class:"q-ml-md",color:"secondary",icon:"delete_forever",label:e.$t("profile_profilePicture_button_deleteFile_label"),disable:!e.getActiveProfileImageId||e.getFileProcessingStatusWithTemporaryFileId(u.temporaryFileId),onClick:i[3]||(i[3]=e=>u.showConfirmDelete=!0)},null,8,["label","disable"])]),u.localFileContent?((0,r.wg)(),(0,r.j4)("div",s,[(0,r.Wm)(y,{src:u.localFileContent,"spinner-color":"white",style:{"max-height":"200px","max-width":"200px"}},{default:(0,r.w5)((()=>[e.getFileProcessingStatusWithTemporaryFileId(u.temporaryFileId)?((0,r.wg)(),(0,r.j4)("div",c,[(0,r.Wm)(_,{color:"primary",size:"3em"})])):(0,r.ry)("",!0)])),_:1},8,["src"])])):(0,r.ry)("",!0),!u.localFileContent&&e.getActiveProfileImageContent?((0,r.wg)(),(0,r.j4)("div",m,[(0,r.Wm)(y,{src:e.getActiveProfileImageContent,"spinner-color":"white",style:{"max-height":"200px","max-width":"200px"}},{default:(0,r.w5)((()=>[e.getFileProcessingStatusWithTemporaryFileId(u.temporaryFileId)?((0,r.wg)(),(0,r.j4)("div",d,[(0,r.Wm)(_,{color:"primary",size:"3em"})])):(0,r.ry)("",!0)])),_:1},8,["src"])])):(0,r.ry)("",!0),(0,r.Wm)(F,{propShow:u.showConfirmDelete,propConfirmMessage:f.m("app_confirm_Really_delete_recordname",{recordname_nominativSingular:e.$t("recordname_profilePicture_nominativSingular")}),propIconMessage:"mdi-account-question-outline",propOkButtonLabel:e.$t("app_button_Delete"),onConfirmed:f.deleteImage,onHide:i[4]||(i[4]=e=>u.showConfirmDelete=!1),key:u.showConfirmDelete},null,8,["propShow","propConfirmMessage","propOkButtonLabel","onConfirmed"]),(0,r.Wm)(b,{errorList:e.getFileErrorlist},null,8,["errorList"])],32)])),_:1})])),_:1})}var u=t(515),f=t.n(u),g=t(7874),h=t(7476),I=t(816),_=t(5987),y=t(3759),F=t(6401);const b={name:"ProfilePicture",data(){return{localFileContent:"",temporaryFileId:null,showConfirmDelete:!1}},methods:f()(f()(f()({upload(e){if(e.target.files.length){this.fileUploadInitialize();const i=e.target.files[0];this.temporaryFileId=Date.now(),i.temporaryFileId=this.temporaryFileId,i.isProfileImage=!0;const t=new FileReader;t.readAsDataURL(i),t.onload=e=>{const t=i;t.temporaryFileId=i.temporaryFileId,t.nameWithExtension=i.name,t.filecontent=e.target.result,t.isProcessing=!0,t.isProfileImage=!1,this.fileAddTemporaryFile(t),this.localFileContent=e.target.result,this[y.os]({file:i,filecontent:this.localFileContent,profileId:this.$store.state.profile.activeProfile&&this.$store.state.profile.activeProfile.id,temporaryFileId:this.temporaryFileId,isProfileImage:!0,oldProfileImageId:this.getActiveProfileImageId,token:this.getUserToken,onSuccessNotification:this.m("backend_notification_recordname_uploaded_sucessfully",{recordname_singular:this.m("recordname_profilePicture_singular")}),onSuccessNotificationParameter:{recordname_profilePicture_singular:""}})}}},deleteImage(){this.getActiveProfileImageId&&(this.fileUploadInitialize(),this.temporaryFileId=null,this.localFileContent="",this[y.U7]({fileId:this.getActiveProfileImageId,token:this.getUserToken,onSuccessNotification:this.m("backend_notification_recordname_deleted_sucessfully",{recordname_singular:this.m("recordname_profilePicture_singular")}),onSuccessNotificationParameter:{recordname_profilePicture_singular:""}}))}},(0,g.nv)(["fileAddTemporaryFile","fileUploadInitialize"])),(0,h.$R)([y.os,y.U7])),{},{m:F.m}),computed:f()({},(0,g.Se)(["getFileErrorlist","getUserToken","getFileProcessingStatusWithTemporaryFileId","getActiveProfileImageContent","getActiveProfileImageId"])),created(){this.fileUploadInitialize()},components:{"confirm-yes-no":_.Z,"error-row-card":I.Z}};var P=t(4379),w=t(151),v=t(5607),C=t(4554),k=t(8240),W=t(4027),S=t(9754),q=t(7518),x=t.n(q);b.render=p;const A=b;x()(b,"components",{QPage:P.Z,QCard:w.Z,QBanner:v.Z,QIcon:C.Z,QBtn:k.Z,QImg:W.Z,QSpinner:S.Z})}}]);