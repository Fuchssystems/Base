(self["webpackChunkbase"]=self["webpackChunkbase"]||[]).push([[529],{7647:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var n=a(3673),s=a(2323);const r=(0,n.HX)("data-v-7557be98");(0,n.dD)("data-v-7557be98");const o={class:"row q-mb-md"},l={class:"row"},m=(0,n.Wm)("div",{class:"row q-mb-md"},[(0,n.Wm)("div",{class:"col-6 text-subtitle2"},[(0,n.Wm)("div",null,[(0,n.Uk)("Paypal sandbox email: test@fuchs.computer"),(0,n.Wm)("br"),(0,n.Uk)("Password: 12345678")])])],-1),u={class:"row q-mb-md justify-between"},i={ref:"paypalButton",class:"col-4"},d={key:0,class:"row"};(0,n.Cn)();const p=r(((e,t,a,p,c,y)=>{const b=(0,n.up)("q-icon"),g=(0,n.up)("q-banner"),f=(0,n.up)("q-input"),_=(0,n.up)("q-toolbar-title"),h=(0,n.up)("q-toolbar"),v=(0,n.up)("q-item-label"),w=(0,n.up)("q-item-section"),P=(0,n.up)("q-item"),W=(0,n.up)("q-list"),k=(0,n.up)("q-card"),q=(0,n.up)("error-row-card"),L=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(L,{padding:""},{default:r((()=>[(0,n.Wm)(k,{class:"input-card"},{default:r((()=>[(0,n.Wm)("form",null,[(0,n.Wm)("div",o,[(0,n.Wm)(g,{class:"bg-grey-3 col"},{avatar:r((()=>[(0,n.Wm)(b,{name:"euro_symbol",color:"primary"})])),default:r((()=>[(0,n.Uk)(" "+(0,s.zw)(e.$t("payments_paypal_title")),1)])),_:1})]),(0,n.Wm)("div",l,[(0,n.Wm)(f,{modelValue:c.formDataPayment.amount,"onUpdate:modelValue":t[1]||(t[1]=e=>c.formDataPayment.amount=e),onKeyup:t[2]||(t[2]=e=>y.onKeyupFormData("amount")),onBlur:y.onBlurAmount,rules:[t=>y.validateAmount(t)||e.$t("app_std_err_enter_amount_between",{min:y.formatAmount(.01),max:1e5})],ref:"amount","lazy-rules":"",outlined:"",class:"col",style:{"max-width":"200px"},label:e.$t("payments_paypal_field_amount_label"),"stack-label":"","input-style":"text-align: left",prefix:"â‚¬"},null,8,["modelValue","onBlur","rules","label"])]),m,(0,n.Wm)("div",u,[(0,n.Wm)("div",i,null,512)]),e.getPaymentMessageList.length?((0,n.wg)(),(0,n.j4)("div",d,[(0,n.Wm)(k,{flat:"",bordered:"",class:"message-card q-mt-md bg-green-1"},{default:r((()=>[(0,n.Wm)(h,{class:"bg-green-1"},{default:r((()=>[(0,n.Wm)(b,{name:"message",size:"32px",color:"green"}),(0,n.Wm)(_,null,{default:r((()=>[(0,n.Uk)((0,s.zw)(e.$t("backend_message_header")),1)])),_:1})])),_:1}),(0,n.Wm)(W,{bordered:""},{default:r((()=>[((0,n.wg)(!0),(0,n.j4)(n.HY,null,(0,n.Ko)(e.getPaymentMessageList,(e=>((0,n.wg)(),(0,n.j4)(P,{key:e,class:"q-my-xs message-item"},{default:r((()=>[(0,n.Wm)(w,null,{default:r((()=>[(0,n.Wm)(v,null,{default:r((()=>[(0,n.Uk)((0,s.zw)(e),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])):(0,n.ry)("",!0),(0,n.Wm)(q,{errorList:e.getPaymentErrorList},null,8,["errorList"])])])),_:1})])),_:1})}));var c=a(515),y=a.n(c),b=a(7874),g=a(816),f=a(7476),_=a(6401),h=(a(5363),a(4532));const v=(e,t)=>{let a=0;for(let n=0;n<e.length;n+=1)e[n]===t&&(a+=1);return a},w=function(e){let t=0;if(e&&"number"!==typeof e){const a=h.i18nGlobal.t("app_locale_thousandsSeperator"),n=h.i18nGlobal.t("app_locale_decimalPoint");1===v(e,a)&&-1===e.indexOf(n)&&(e=e.replace(a,n)),t=parseFloat(e.replace(a,"").replace(n,"."))}return Number.isNaN(t)&&(t=0),t};var P=a(2435);const W={name:"Payments",components:{"error-row-card":g.Z},data(){return{formDataPayment:{amount:this.formatAmount(this.$store.state.payment.amount)}}},mounted(){const e=document.createElement("script");e.async=!0,e.addEventListener("load",this.onPayPalLoaded),e.setAttribute("src",`https://www.paypal.com/sdk/js?client-id=Ac1YkChXM-U7aX4JCG56VbM0I2Vg3PUIjN4qmq9_dJJ7q_ahZ9Iux1TqIUwL_cxnRCW-qx0QajvCj01A&currency=EUR&locale=${(0,_.m)("app_locale_payPal")}`),document.head.appendChild(e)},methods:y()(y()({formatAmount(e){return new Intl.NumberFormat((0,_.m)("app_locale_browser"),{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},onBlurAmount(e){this.formDataPayment.amount=this.formatAmount(w(e.target.value))},paypalCallbackTransactionCompleted(e){this[P.D]({details:e,token:this.getUserToken}),this.formDataPayment.amount=this.formatAmount(0),this.$refs.amount.resetValidation(),this.paymentSetmessage([(0,_.m)("payments_paypal_message_transaction_success",{amountLocalized:e.purchase_units[0].amount.value,senderName:e.payer.name.given_name})])},onPayPalLoaded(){const e=window.paypal.Buttons.bind(this);e({onInit:(e,t)=>{t.disable(),this.$refs.amount.$el.addEventListener("keyup",(()=>{this.$refs.amount.validate()?t.enable():t.disable()}))},createOrder:(e,t)=>t.order.create({purchase_units:[{amount:{value:w(this.formDataPayment.amount)}}]}),onApprove:(e,t)=>t.order.capture().then((e=>this.paypalCallbackTransactionCompleted(e)))}).render(this.$refs.paypalButton)},validateAmount(e){let t=!1;if(e){const a=w(e);t=a>=.01&&a<=1e6}return t},onKeyupFormData(e){(this.getPaymentMessageList.length||this.getPaymentErrorList.length)&&this.resetPaymentMessageErrorLists(),e&&"amount"===e&&this.$refs.amount.validate()}},(0,b.nv)(["paymentSetmessage","resetPaymentMessageErrorLists"])),(0,f.$R)([P.D])),computed:y()({},(0,b.Se)(["getPaymentMessageList","getPaymentErrorList","getUserToken"]))};var k=a(4379),q=a(151),L=a(5607),x=a(4554),Z=a(4842),A=a(9570),C=a(3747),D=a(7011),Q=a(3414),$=a(2035),I=a(2350),U=a(5869),j=a(7518),E=a.n(j);W.render=p,W.__scopeId="data-v-7557be98";const B=W;E()(W,"components",{QPage:k.Z,QCard:q.Z,QBanner:L.Z,QIcon:x.Z,QInput:Z.Z,QToolbar:A.Z,QToolbarTitle:C.Z,QList:D.Z,QItem:Q.Z,QItemSection:$.Z,QItemLabel:I.Z,QSeparator:U.Z})}}]);