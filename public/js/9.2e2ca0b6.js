(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[9],{"408a":function(e,t,a){},"713b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("q-header",{attrs:{elevated:""}},[a("q-toolbar",[a("q-btn",{attrs:{flat:"",dense:"",round:"","aria-label":"Menu"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}},[a("q-icon",{attrs:{name:"menu"}})],1),a("q-toolbar-title",{staticClass:"lt-md"},[e._v("\n        "+e._s()+"\n      ")]),a("q-toolbar-title",{staticClass:"gt-sm"},[e._v("\n        "+e._s(e.$t("app_applicationName"))+"\n      ")]),a("user-language-menu"),e.getIsLoggedIn?e._e():a("q-btn",{attrs:{to:"/login",flat:"",label:e.$t("app_log_label_Login")}}),e.getIsLoggedIn?a("q-btn",{attrs:{flat:"",label:e.$t("app_log_label_Logout")},on:{click:e.logout}}):a("q-btn",{attrs:{to:"/register",flat:"",label:e.$t("app_log_label_Register")}}),e.getUserToken?a("q-btn",{staticClass:"toolbar-username toolbar-button-text",attrs:{flat:"",icon:"account_circle",label:e.getUserName}},[e.getIsLoggedIn?a("q-menu",{attrs:{"auto-close":""}},[a("q-list",{staticStyle:{"min-width":"100px"}},[a("q-item",{attrs:{clickable:"",to:"/credentials"}},[a("q-item-section",[e._v(e._s(e.$t("menu_user_menu_account_item_credentials")))])],1)],1)],1):e._e()],1):e._e()],1)],1),a("q-drawer",{attrs:{bordered:"","content-class":"bg-primary"},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[a("q-list",{attrs:{dark:""}},[a("q-item-label",{attrs:{header:""}},[e._v(e._s(e.$t("menu_navigation_title")))]),e._l(e.navs,(function(t){return a("div",{key:t.label},[t.to&&!t.hide?a("q-item",{staticClass:"text-grey-4",attrs:{to:t.to,exact:"",clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:t.icon}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(t.label))])],1)],1):e._e(),t.to||t.hide?e._e():a("q-expansion-item",{attrs:{"expand-separator":"",icon:t.icon,label:t.label}},e._l(t.menuItems,(function(t){return a("div",{key:t.label},[a("q-item",{staticClass:"text-grey-4",attrs:{to:t.to,exact:"",clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:t.icon}})],1),a("q-item-section",[a("q-item-label",[e._v(e._s(t.label))])],1)],1)],1)})),0)],1)}))],2)],1),a("q-page-container",[a("router-view")],1)],1)},s=[],n=a("ded3"),l=a.n(n),o=a("b06b"),r=a("2a19"),c=a("2f62"),g=a("7429"),u=a("2ef0"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-btn",{staticStyle:{"max-width":"32px"},attrs:{flat:"",icon:"language"}},[a("q-menu",{ref:"languageMenu",attrs:{"auto-close":""}},[a("div",{staticStyle:{"min-width":"110px"}},[a("q-option-group",{attrs:{options:e.languageOptions},model:{value:e.languageGroup,callback:function(t){e.languageGroup=t},expression:"languageGroup"}})],1)])],1)},h=[],d=a("b405"),_={data(){return{languageOptions:[{label:"Deutsch",value:"de-de"},{label:"Englisch",value:"en-us"},{label:"Español",value:"es-es"}]}},methods:l()(l()({},Object(c["b"])(["setLanguageLocale"])),Object(g["b"])([d["e"]])),computed:l()(l()({},Object(c["c"])(["getUserId","getUserLanguageLocale","getUserToken"])),{},{languageGroup:{get(){return this.$store.getters.getUserLanguageLocale},set(e){this.setLanguageLocale(e),this.$root.$i18n.locale=e,this[d["e"]]({userId:this.getUserId,language:this.getUserLanguageLocale,token:this.getUserToken})}}}),watch:{languageGroup(){this.$refs.languageMenu.hide()}}},p=_,b=a("2877"),f=a("9c40"),v=a("4e73"),I=a("9f0a"),C=a("eebe"),$=a.n(C),k=Object(b["a"])(p,m,h,!1,null,null,null),q=k.exports;$()(k,"components",{QBtn:f["a"],QMenu:v["a"],QOptionGroup:I["a"]});var L=a("ee20"),w=a("596b"),U=a("82ab"),S=a("9cb2"),y={name:"MyLayout",data(){return{leftDrawerOpen:this.$q.platform.is.desktop,incomingCallNotification:null,ringtone:new Audio("sounds/ringtone.mp3")}},methods:l()(l()({openURL:o["a"],logout(){this[d["b"]]({token:this.getUserToken,sessionId:this.getUserSessionId})},listen(){this.getUserActiveProfileId&&this.$echo.channel(`profile.${this.getUserActiveProfileId}`).listen("MessageToProfile",(e=>{if("isWriting"!==e.message.type&&(this[L["m"]](e.message),"newChatmessage"===e.message.type))if(e.message.senderProfile.id===this.getChatChatMessagesProfileIdSet)this[L["n"]]({chatMessageId:e.message.chatmessage.id,token:this.getUserToken});else{let t=e.message.chatmessage.messageText;t.length>100&&(t+="…"),this.incomingCallNotification=r["a"].create({message:`${this.$t("chat_message_newMessageFrom")} ${e.message.senderProfile.name}`,caption:t,color:"teal",textColor:"white",icon:"email"})}if("isWriting"===e.message.type&&(this.chatSetProfileSetIsWriting({isWriting:!0}),this.resetIsWriting()),"updateCall"===e.message.type){this.vcSetCall({responseData:{call:e.message.call}});const{status:t}=e.message.call;switch(t){case w["f"]:this[w["h"]]({id:e.message.call.id,status:this.getVCcallerStatus===w["l"]?w["e"]:w["d"],token:this.getUserToken}),this.getVCcallerStatus===w["l"]&&(this.ringtone.play(),this.incomingCallNotification=r["a"].create({message:Object(U["a"])("vc_notification_incomingCall_from",{name:e.message.call.profile_name_receiver}),timeout:1e4,color:"info",textColor:"white",icon:"video_call",position:"center",multiline:!0,group:!1,onDismiss:()=>{this.ringtone.pause(),this.ringtone.currentTime=0,this.incomingCallNotification=null},actions:[{icon:"call_end",label:this.$t("vc_button_call_decline"),color:"red",handler:()=>{this[w["h"]]({id:e.message.call.id,status:w["b"],token:this.getUserToken})}},{icon:"call",label:this.$t("vc_button_call_accept"),color:"green",handler:()=>{this.ringtone.pause(),this.ringtone.currentTime=0,this[w["h"]]({id:e.message.call.id,status:w["a"],token:this.getUserToken,sessionIdReceiver:this.getUserSessionId}),this.vcSetModeUseReceivedProfile({modeUseReceivedProfile:!0}),this[w["i"]]({id:e.message.call.profile_id_caller,token:this.getUserToken}),"/profileDetail/videochat"!==this.$route.path&&this.$router.push("/profileDetail/videochat")}}]}));break;case w["d"]:this.vcSetCallerStatus(w["l"]);break;case w["c"]:this.incomingCallNotification&&(console.log("Handling VC_CALL_END_CALL"),this.incomingCallNotification()),this.vcInitComponent();break}}}))}},Object(c["b"])(["chatSetProfileSetIsWriting","vcInitComponent","vcSetCall","vcSetCallerStatus","vcSetModeUseReceivedProfile"])),Object(g["b"])([d["b"],L["m"],L["n"],w["h"],w["i"]])),computed:l()(l()({},Object(c["c"])(["getChatChatMessagesProfileIdSet","getIsLoggedIn","getUserToken","getUserName","getUserActiveProfileId","getUserSessionId","getVCcallerStatus"])),{},{navs(){return[{label:this.$t("menu_navigation_home"),icon:"mdi-home",to:"/"},{label:this.$t("menu_chat_title"),hide:!this.getIsLoggedIn||!S["a"].featureChat,icon:"chat",to:"/chat"},{label:this.$t("menu_user_menu_account_title_acountSettings"),hide:!this.getIsLoggedIn,icon:"account_circle",menuItems:[{label:this.$t("menu_user_menu_account_item_credentials"),to:"/credentials"},{label:this.$t("menu_user_menu_account_item_deleteAccount"),to:"/deleteAccount"}]},{label:this.$t("menu_profile_title"),hide:!this.getIsLoggedIn,icon:"mdi-account-card-details",menuItems:[{label:this.$t("menu_profile_item_personalData"),to:"/profilePersonalData"},{label:this.$t("menu_profile_item_profilePicture"),to:"/profilePicture"},{label:this.$t("menu_profile_item_images"),to:"/profileImages"}]},{label:this.$t("menu_payments_title"),hide:!this.getIsLoggedIn,icon:"euro_symbol",menuItems:[{label:this.$t("menu_payments_makeTransfer"),to:"/payments"},{label:this.$t("menu_payments_transactions"),to:"/transactions"}]},{label:this.$t("menu_contact_title"),icon:"contact_support",to:"/contact"},{label:"Protected",icon:"security",to:"/protected"}]}}),watch:{getUserActiveProfileId(){this.listen()}},mounted(){this.listen(),this.resetIsWriting=Object(u["debounce"])((()=>{this.chatSetProfileSetIsWriting({isWriting:!1})}),5e3,{leading:!1,trailing:!0})},components:{"user-language-menu":q}},P=y,x=(a("c3a2"),a("4d5a")),O=a("e359"),D=a("65c6"),T=a("0016"),Q=a("6ac5"),M=a("1c1c"),j=a("66e5"),N=a("4074"),A=a("9404"),W=a("0170"),E=a("3b73"),G=a("09e3"),R=Object(b["a"])(P,i,s,!1,null,"3574efed",null);t["default"]=R.exports;$()(R,"components",{QLayout:x["a"],QHeader:O["a"],QToolbar:D["a"],QBtn:f["a"],QIcon:T["a"],QToolbarTitle:Q["a"],QMenu:v["a"],QList:M["a"],QItem:j["a"],QItemSection:N["a"],QDrawer:A["a"],QItemLabel:W["a"],QExpansionItem:E["a"],QPageContainer:G["a"]})},"9cb2":function(e,t,a){"use strict";t["a"]={featureDevelopment:!0,featureChat:!0,featureDemo:!0,featureProfileDetailView:!0,featureVideoChat:!0}},c3a2:function(e,t,a){"use strict";a("408a")}}]);