import{_ as C,af as V,bl as f,P as Q,R as U,ab as S,S as I,V as u,W as g,X as o,ah as w,Y as s,Z as l,y as n,ai as m,aj as d,aW as p,bm as y,a0 as h,al as _,aR as c,an as B,am as F,ak as b,aX as P}from"./index.7938054f.js";import{Q as v}from"./QBanner.77ae7398.js";import{Q as E}from"./QSpace.7ed4d632.js";import{Q as L,a as z}from"./QToolbar.5e8661aa.js";import{Q as G,b as K,a as R}from"./QItemLabel.3dccd102.js";import{Q as M}from"./QList.983ed313.js";import{Q as N}from"./QPage.f1dcf01a.js";import{E as T}from"./ErrorRowCard.4ade862b.js";import{M as A}from"./MessageRowCard.8505da37.js";import{U as $}from"./UserPwSequrityQuestionSelect.a94ac0f5.js";import"./QSelect.56829590.js";import"./QChip.63f2bf45.js";import"./QMenu.2d0c7e79.js";import"./selection.d1bc92c3.js";import"./rtl.4b414a6d.js";const O={name:"UserEmailPassword",components:{"error-row-card":T,"message-row-card":A,"user-pw-sequrity-question-select":$},data(){return{formDataEmail:{email:this.$store.state.user.user.email},submitButtonEmailDisabled:!0,formDataPassword:{password:"",confirmPassword:"",security_question_key:"",answer_security_question:""},passwordVisible:!1,settings:V}},methods:{isValidEmailAddress(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},isConfirmpasswordEqualPassword(e){return!this.formDataPassword.password||e===this.formDataPassword.password?!0:this.$t("app_register_err_Passwords_do_not_match")},submitFormEmail(){this.userBackendCallInitialize({errorGroup:"email"}),this.$refs.email.validate(),this.$refs.email.hasError||this[f]({fields:{user:this.formDataEmail},token:this.getUserToken,errorGroup:"email",onSuccessNotificationId:"user_credentials_group_email_notification_safe_successful"})},onSecurityQuestionChange(e){this.formDataPassword.security_question_key=e,this.onKeyupFormDataPassword("security_question_key")},submitFormPassword(){this.userBackendCallInitialize({errorGroup:"password"}),this.userResetMessageList(),this.$refs.password.validate(),this.$refs.confirmPassword.validate(),this.settings.featureResetPassword&&(this.$refs.securityQuestion.validate(),this.$refs.answer_security_question.validate());let e=this.$refs.password.hasError||this.$refs.confirmPassword.hasError;!e&&this.settings.featureResetPassword&&(e=this.$refs.securityQuestion.hasError||this.$refs.answer_security_question.hasError),e||this[f]({fields:{user:this.formDataPassword},token:this.getUserToken,errorGroup:"password",onSuccessNotificationId:"user_credentials_group_password_notification_safe_successful"})},...Q(["userBackendCallInitialize","userResetMessageList","userSetMessage"]),...U([f]),onKeyupFormDataEmail(){this.getErrorGroup("email").length&&this.userBackendCallInitialize({errorGroup:"email"}),this.submitButtonEmailDisabled=!this.$refs.email.validate()||this.formDataEmail.email===this.getUser.email},onKeyupFormDataPassword(e){this.getErrorGroup("password").length&&this.userBackendCallInitialize({errorGroup:"password"}),e==="password"&&this.formDataPassword.confirmPassword&&this.$refs.confirmPassword.validate()},m:S},computed:{...I(["getErrorGroup","getUserMessageList","getUser","getUserPasswordIsTemporary","getUserToken"])},created(){this.userBackendCallInitialize()},mounted(){this.userResetMessageList(),this.getUserPasswordIsTemporary&&this.userSetMessage({messageTextArray:[this.$t("app_temporary_password_please_assign_own")]})}},Z={class:"row q-mb-md"},W={class:"row q-mb-md"},X={class:"row q-my-xs row-submit"},j={key:0,class:"row"},Y={class:"row q-mb-md"},H={class:"row q-mb-xs"},J={class:"row q-mb-md"},x={key:0,class:"row q-my-xs"},ss={key:1,class:"row q-my-xs"},es={class:"row q-my-xs row-submit"};function rs(e,a,as,os,t,i){const q=w("user-pw-sequrity-question-select"),k=w("message-row-card"),D=w("error-row-card");return u(),g(N,{padding:""},{default:o(()=>[s(c,{class:"input-card"},{default:o(()=>[l("form",{onSubmit:a[1]||(a[1]=P((...r)=>i.submitFormEmail&&i.submitFormEmail(...r),["prevent"]))},[l("div",Z,[s(v,{class:"bg-grey-3 col"},{avatar:o(()=>[s(n,{name:"account_circle",color:"primary"})]),default:o(()=>[m(" "+d(e.$t("user_credentials_group_email_title")),1)]),_:1})]),l("div",W,[s(p,{modelValue:t.formDataEmail.email,"onUpdate:modelValue":a[0]||(a[0]=r=>t.formDataEmail.email=r),onKeyup:i.onKeyupFormDataEmail,rules:[r=>!!r||i.m("app_error_fieldname_required",{field:"fieldName_user_email"}),r=>i.isValidEmailAddress(r)||e.$t("app_log_err_email_invalid")],ref:"email","lazy-rules":"",outlined:"",class:"col",label:e.$t("user_field_email_label"),"stack-label":""},{prepend:o(()=>[s(n,{name:"email"})]),_:1},8,["modelValue","onKeyup","rules","label"])]),l("div",X,[s(E),s(y,{align:"right"},{default:o(()=>[s(h,{color:"primary",label:e.$t("user_credentials_group_email_button_save"),type:"submit",disable:t.submitButtonEmailDisabled},null,8,["label","disable"])]),_:1})]),e.getErrorGroup("email").length?(u(),_("div",j,[s(c,{flat:"",bordered:"",class:"error-card q-mt-md bg-red-1"},{default:o(()=>[s(L,{class:"bg-red-1"},{default:o(()=>[s(n,{name:"error",size:"32px",color:"red"}),s(z,null,{default:o(()=>[m(d(e.$t("backend_error_header")),1)]),_:1})]),_:1}),s(M,{bordered:""},{default:o(()=>[(u(!0),_(B,null,F(e.getErrorGroup("email"),r=>(u(),g(G,{key:r,class:"q-my-xs error-item"},{default:o(()=>[s(K,null,{default:o(()=>[s(R,null,{default:o(()=>[m(d(r),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):b("",!0)],32)]),_:1}),s(c,{class:"input-card"},{default:o(()=>[l("form",{onSubmit:a[10]||(a[10]=P((...r)=>i.submitFormPassword&&i.submitFormPassword(...r),["prevent"]))},[l("div",Y,[s(v,{class:"bg-grey-3 col"},{avatar:o(()=>[s(n,{name:"account_circle",color:"primary"})]),default:o(()=>[m(" "+d(e.$t("user_credentials_group_password_title")),1)]),_:1})]),l("div",H,[s(p,{modelValue:t.formDataPassword.password,"onUpdate:modelValue":a[3]||(a[3]=r=>t.formDataPassword.password=r),onKeyup:a[4]||(a[4]=r=>i.onKeyupFormDataPassword("password")),rules:[r=>r.length>=6||e.$t("app_log_err_enter_minNumOfChars",{numOfChars:6})],ref:"password","lazy-rules":"",type:t.passwordVisible?"text":"password",outlined:"",class:"col",label:e.$t("app_log_label_Password"),"stack-label":""},{prepend:o(()=>[s(n,{name:"lock"})]),append:o(()=>[s(n,{name:t.passwordVisible?"visibility":"visibility_off",class:"cursor-pointer",onClick:a[2]||(a[2]=r=>t.passwordVisible=!t.passwordVisible)},null,8,["name"])]),_:1},8,["modelValue","rules","type","label"])]),l("div",J,[s(p,{modelValue:t.formDataPassword.confirmPassword,"onUpdate:modelValue":a[6]||(a[6]=r=>t.formDataPassword.confirmPassword=r),onKeyup:a[7]||(a[7]=r=>i.onKeyupFormDataPassword("confirmPassword")),rules:[r=>r.length>=6||e.$t("app_log_err_enter_minNumOfChars",{numOfChars:6}),i.isConfirmpasswordEqualPassword],ref:"confirmPassword","lazy-rules":"",type:t.passwordVisible?"text":"password",outlined:"",class:"col",label:e.$t("app_log_label_Confirm_Password"),"stack-label":""},{prepend:o(()=>[s(n,{name:"lock"})]),append:o(()=>[s(n,{name:t.passwordVisible?"visibility":"visibility_off",class:"cursor-pointer",onClick:a[5]||(a[5]=r=>t.passwordVisible=!t.passwordVisible)},null,8,["name"])]),_:1},8,["modelValue","rules","type","label"])]),t.settings.featureResetPassword?(u(),_("div",x,[s(q,{onChange:i.onSecurityQuestionChange,ref:"securityQuestion"},null,8,["onChange"])])):b("",!0),t.settings.featureResetPassword?(u(),_("div",ss,[s(p,{modelValue:t.formDataPassword.answer_security_question,"onUpdate:modelValue":a[8]||(a[8]=r=>t.formDataPassword.answer_security_question=r),onKeyup:a[9]||(a[9]=r=>i.onKeyupFormDataPassword("answer_security_question")),rules:[r=>r.length>=2||e.$t("app_log_err_enter_minNumOfChars",{numOfChars:2})],ref:"answer_security_question","lazy-rules":"",outlined:"",class:"col",label:e.$t("user_pw_reset_answersecurity_question_label"),"stack-label":""},{prepend:o(()=>[s(n,{name:"question_answer"})]),_:1},8,["modelValue","rules","label"])])):b("",!0),l("div",es,[s(E),s(y,{align:"right"},{default:o(()=>[s(h,{color:"primary",label:e.$t("user_credentials_group_password_button_save"),type:"submit"},null,8,["label"])]),_:1})]),s(k,{messageList:e.getUserMessageList},null,8,["messageList"]),s(D,{errorList:e.getErrorGroup("password")},null,8,["errorList"])],32)]),_:1})]),_:1})}var hs=C(O,[["render",rs],["__scopeId","data-v-50bd3f3e"]]);export{hs as default};
